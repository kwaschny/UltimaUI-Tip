// MIT, Copyright (c) 2014-2017 Alexander Kwaschny, kwaschny.net
if(!window.UltimaTip){if(jQuery===undefined){throw new Error("jQuery missing for UltimaTip")}if(!jQuery.isPlainObject){throw new Error("jQuery 1.4+ required for UltimaTip")}window.UltimaTip=function(e,t){if(!(this instanceof UltimaTip)){return new UltimaTip(t)}e=jQuery(e).first();this._={};var i=this;this.target=e;this.bubble=null;this.message=null;this.visible=false;this.options={};this.options.current={};this.options["default"]={message:"",animations:{bubble:{show:{effect:"fadeIn",duration:400},hide:{effect:undefined,duration:undefined}}},behavior:{hover:true},css:{bubble:{className:"",directions:"bottom right",offset:{x:0,y:0},zIndex:9100},message:{className:""}},callbacks:{onTipShowing:undefined,onTipShown:undefined,onTipHiding:undefined,onTipHidden:undefined}};this._.properties={classNames:{bubble:"UltimaTip-bubble",message:"UltimaTip-message"}};this.hover=function(){this.bubble._.methods.reposition();this.bubble.show()};this.remove=function(){var e=UltimaTip.getIndex(this.target);if(e>-1){UltimaTip.collection.splice(e,1)}if(this.target instanceof jQuery){this.target.unbind("mouseenter",i._.methods.mouseEnter);this.target.unbind("mouseleave",i._.methods.mouseLeave)}if(this.bubble.dom.element instanceof jQuery){this.bubble.dom.element.remove()}};this.unhover=function(){this.bubble.hide()};this._.methods={createBubble:function(){var e={dom:{element:jQuery("<div></div>").hide()},hide:function(){if(jQuery.isFunction(i.options.current.callbacks.onTipHiding)){if(i.options.current.callbacks.onTipHiding(i)===false){return}}var e=i.options.current.animations.bubble.hide.effect;if(e===undefined){e=i.options.current.animations.bubble.show.effect}var t=i.options.current.animations.bubble.hide.duration;if(t===undefined){t=i.options.current.animations.bubble.show.duration}var n=jQuery.isFunction(i.options.current.callbacks.onTipHidden);switch(e){case"fadeIn":case"fadeOut":this.dom.element.stop(true,true).fadeOut(t,function(){i.visible=false;if(n){i.options.current.callbacks.onTipHidden(i)}});break;default:this.dom.element.hide();i.visible=false;if(n){i.options.current.callbacks.onTipHidden(i)}break}},show:function(){if(jQuery.isFunction(i.options.current.callbacks.onTipShowing)){if(i.options.current.callbacks.onTipShowing(i)===false){return}}var e=jQuery.isFunction(i.options.current.callbacks.onTipShown);switch(i.options.current.animations.bubble.show.effect){case"fadeIn":case"fadeOut":this.dom.element.stop(true,true).fadeIn(i.options.current.animations.bubble.show.duration,function(){i.visible=true;if(e){i.options.current.callbacks.onTipShown(i)}});break;default:this.dom.element.show();i.visible=true;if(e){i.options.current.callbacks.onTipShown(i)}break}},_:{methods:{reposition:function(){var e=i.target.offset();if(e===undefined){return}var t={height:i.target.outerHeight(),left:e.left,top:e.top,width:i.target.outerWidth()};var n={height:i.bubble.dom.element.outerHeight(),width:i.bubble.dom.element.outerWidth()};var s=i.options.current.css.bubble.directions.split(" ");var o,r;for(var u=0;u<s.length;u++){switch(s[u].toLowerCase()){case"bottom":r=t.top+t.height+i.options.current.css.bubble.offset.y;break;case"center":o=Math.max(0,t.left+t.width/2-n.width/2+i.options.current.css.bubble.offset.x);break;case"left":o=t.left-n.width-i.options.current.css.bubble.offset.x;break;case"middle":r=t.top+t.height/2-n.height/2+i.options.current.css.bubble.offset.y;break;case"right":o=t.left+t.width+i.options.current.css.bubble.offset.x;break;case"top":r=t.top-n.height-i.options.current.css.bubble.offset.y;break}}if(o===undefined){o=Math.max(0,t.left+t.width/2-n.width/2+i.options.current.css.bubble.offset.x)}if(r===undefined){r=t.top+t.height/2-n.height/2+i.options.current.css.bubble.offset.y}i.bubble.dom.element.css({left:o,top:r})}}}};e.dom.element.addClass(i._.properties.classNames.bubble);e.dom.element.addClass(i.options.current.css.bubble.className);var t={};if(!i.options.current.css.bubble.className){t.backgroundColor="#FFFFFF";t.border="1px solid #808080";t.boxShadow="2px 2px 4px #808080";t.color="#808080";t.fontSize="80%";t.padding="4px"}jQuery.extend(true,t,i.options.current.css.bubble);jQuery.extend(true,t,{position:"absolute",zIndex:i.options.current.css.bubble.zIndex});e.dom.element.css(t);if(i.options.current.behavior.hover===true){i.target.hover(i._.methods.mouseEnter,i._.methods.mouseLeave)}return e},createMessage:function(){var e={dom:{element:jQuery("<div></div>")},hide:function(){this.dom.element.hide()},set:function(e){this.dom.element.html(e)},show:function(){this.dom.element.show()}};e.dom.element.addClass(i._.properties.classNames.message);e.dom.element.addClass(i.options.current.css.message.className);e.dom.element.css(i.options.current.css.message);return e},mouseEnter:function(){i.bubble._.methods.reposition();i.bubble.show()},mouseLeave:function(){i.bubble.hide()},mergeOptions:function(e,t){i._.methods.translateOptions(t);var n={};jQuery.extend(true,n,e);jQuery.extend(true,n,t);return n},translateOptions:function(e){var t,i,n,s,o;for(var r in e){if(!e.hasOwnProperty(r)){continue}if(r.indexOf("->")!==0){continue}t=r.replace("->","");t=t.split(".");i=t.length;s={};o=s;for(n=0;n<i-1;n++){o[t[n]]={};o=o[t[n]]}o[t[i-1]]=e[r];delete e[r];jQuery.extend(true,e,s)}return e}};this.options.current=this._.methods.mergeOptions(this.options["default"],UltimaTip.options);this.options.current=this._.methods.mergeOptions(this.options.current,t);this.bubble=this._.methods.createBubble();this.message=this._.methods.createMessage();this.message.set(this.options.current.message);this.bubble.dom.element.append(this.message.dom.element);jQuery("body").append(this.bubble.dom.element);UltimaTip.collection.push(this)};UltimaTip.collection=[];UltimaTip.options={};UltimaTip._={methods:{}};UltimaTip._.methods.isOptions=function(e){if(!jQuery.isPlainObject(e)){return false}if(e.message&&!jQuery.isPlainObject(e.message)||e.css&&jQuery.isPlainObject(e.css)||e.callbacks&&jQuery.isPlainObject(e.callbacks)){return true}for(var t in e){if(!e.hasOwnProperty(t)){continue}if(/^->[a-z]+(\.[a-z]+)?/.test(t)){return true}}return false};UltimaTip.clear=function(){var e=0;var t;while(true){t=UltimaTip.get(0);if(t!==null){e+=1;t.remove()}else{break}}return e};UltimaTip.get=function(e){if(typeof e==="number"){if(UltimaTip.collection.length>e){return UltimaTip.collection[e]}}else{var t=UltimaTip.getIndex(e);if(t>-1){return UltimaTip.collection[t]}}return null};UltimaTip.getIndex=function(e){if(e instanceof jQuery){e=e[0]}var t=0,i=UltimaTip.collection.length;for(t;t<i;t++){if(e===UltimaTip.collection[t].target[0]){return t}}return-1};UltimaTip.remove=function(e){var t=0;var i=UltimaTip.get(e);while(i!==null){i.remove();t+=1;i=UltimaTip.get(e)}return t};jQuery.UltimaTip={options:{}};jQuery.UltimaTip.hover=function(e,t,i){if(e===undefined){return null}if(arguments.length===2){if(UltimaTip._.methods.isOptions(t)){i=t;t=undefined}}var n={};jQuery.extend(true,n,jQuery.UltimaTip.options);jQuery.extend(true,n,i);if(t){n.message=t}var s=new UltimaTip(e,n);s.hover();return s};jQuery.UltimaTip.unhover=function(e){return UltimaTip.remove(e)};jQuery.fn.UltimaTip=function(e,t){if(e===undefined||e===""){return UltimaTip.remove(this)}if(arguments.length===1){if(UltimaTip._.methods.isOptions(e)){t=e;e=undefined}}var i={};jQuery.extend(true,i,jQuery.UltimaTip.options);jQuery.extend(true,i,t);if(e){i.message=e}this.each(function(){new UltimaTip(this,i)});return this};jQuery.fn.hoverTip=function(){this.each(function(){var e=UltimaTip.get(this);if(e!==null){e.hover()}});return this};jQuery.fn.unhoverTip=function(){this.each(function(){var e=UltimaTip.get(this);if(e!==null){e.unhover()}});return this};jQuery.fn.toggleHoverTip=function(){this.each(function(){var e=UltimaTip.get(this);if(e!==null){if(e.visible){e.unhover()}else{e.hover()}}});return this};UltimaTip.version="0.4.4"}